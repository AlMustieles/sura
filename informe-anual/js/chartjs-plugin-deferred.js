/*!
 * @license
 * chartjs-plugin-deferred v1.0.2
 * https://chartjs-plugin-deferred.netlify.app
 * (c) 2016-2021 chartjs-plugin-deferred contributors
 * Released under the MIT license
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(require("chart.js")):"function"==typeof define&&define.amd?define(["chart.js"],t):t(e.Chart)}(this,(function(e){"use strict";var t=(e=e&&e.hasOwnProperty("default")?e.default:e).helpers,r="$chartjs_deferred";function n(e,r){r?window.setTimeout(e,r):t.requestAnimFrame.call(window,e)}function d(e,t){var r=parseInt(e,10);return isNaN(r)?0:"string"==typeof e&&-1!==e.indexOf("%")?r/100*t:r}function a(e){var t=e.$deferred.options,r=e.chart.canvas;if(!r||null===r.offsetParent)return!1;var n=r.getBoundingClientRect(),a=d(t.yOffset||0,n.height),o=d(t.xOffset||0,n.width);return n.right-o>=0&&n.bottom-a>=0&&n.left+o<=window.innerWidth&&n.top+a<=window.innerHeight}function o(e){var t=e.target[r];t.ticking||(t.ticking=!0,n((function(){var e,r,n=t.charts.slice(),d=n.length;for(r=0;r<d;++r)a(e=n[r])&&(i(e),e.$deferred.appeared=!0,e.update());t.ticking=!1})))}function f(e){if(e.nodeType===Node.ELEMENT_NODE){var r=t.getStyle(e,"overflow-x"),n=t.getStyle(e,"overflow-y");return"auto"===r||"scroll"===r||"auto"===n||"scroll"===n}return e.nodeType===Node.DOCUMENT_NODE}function i(e){e.$deferred.elements.forEach((function(n){var d=n[r].charts;d.splice(d.indexOf(e),1),d.length||(t.removeEvent(n,"scroll",o),delete n[r])})),e.$deferred.elements=[]}e.defaults.global.plugins.deferred={xOffset:0,yOffset:0,delay:0},e.plugins.register({id:"deferred",beforeInit:function(e,n){e.$deferred={options:n,appeared:!1,delayed:!1,loaded:!1,elements:[]},function(e){for(var n,d,a=e.chart.canvas.parentElement;a;)f(a)&&(0===(d=(n=a[r]||(a[r]={})).charts||(n.charts=[])).length&&t.addEvent(a,"scroll",o),d.push(e),e.$deferred.elements.push(a)),a=a.parentElement||a.ownerDocument}(e)},beforeDatasetsUpdate:function(e,t){var r=e.$deferred;if(!r.loaded){if(!r.appeared&&!a(e))return!1;if(r.appeared=!0,r.loaded=!0,i(e),t.delay>0)return r.delayed=!0,n((function(){e.ctx&&(r.delayed=!1,e.update())}),t.delay),!1}if(r.delayed)return!1},destroy:function(e){i(e)}})}));